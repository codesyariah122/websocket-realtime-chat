<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.js"></script>
    <style>
      body {
        background: radial-gradient(circle, #1a1a2e, #0f3460);
        font-family: "Poppins", sans-serif;
      }

      #emoji-button {
        width: 32px;
        height: 32px;
        line-height: 1;
      }
    </style>
  </head>
  <body class="flex flex-col items-center justify-center min-h-screen px-4">
    <audio id="notif-sound" src="/static/sounds/notification.mp3"></audio>
    <audio id="login-sound" src="/static/sounds/login.mp3"></audio>

    <h2 class="text-2xl text-white font-bold mb-4 text-center">Chat Admin</h2>

    <div id="active-users" class="text-white text-center mb-4 w-full max-w-lg">
      <strong>Users Online:</strong>
      <ul id="user-list"></ul>
    </div>

    <select id="receiver" class="p-2 mb-2 w-full max-w-lg rounded text-sm">
      <option value="">Pilih User</option>
    </select>

    <button
      onclick="deleteChat()"
      class="send-btn bg-red-500 hover:bg-red-700 text-white w-full max-w-lg py-2 rounded-md text-sm"
    >
      Hapus Chat
    </button>

    <div
      class="chat-box w-full max-w-lg h-[300px] bg-white bg-opacity-10 backdrop-blur-md rounded-lg p-4 overflow-auto mt-4"
      id="chat-box"
    ></div>

    <div class="input-area flex flex-col w-full max-w-lg mt-4">
      <div class="relative w-full">
        <button
          id="emoji-button"
          class="absolute right-2 top-2 bottom-2 flex items-center justify-center bg-gray-700 text-white p-2 rounded-md text-sm"
        >
          ðŸ˜€
        </button>
        <textarea
          id="message"
          class="input-box w-full resize-none min-h-[80px] p-3 rounded-md bg-white bg-opacity-15 text-white text-sm focus:bg-opacity-30 focus:ring-2 focus:ring-white"
          placeholder="Tulis pesan..."
        ></textarea>
      </div>

      <button
        onclick="sendMessage()"
        class="send-btn w-full mt-2 bg-gradient-to-r from-pink-500 to-red-400 hover:from-pink-600 hover:to-red-500 text-white font-bold py-2 rounded-md text-sm"
      >
        Kirim
      </button>

      <button
        onclick="leaveChat()"
        class="mt-4 px-6 py-2 mb-36 bg-red-500 text-white rounded-lg hover:bg-red-700 transition"
      >
        Leave
      </button>
    </div>

    <script>
      /** inisialisasi nickname**/
      var nickname = "{{ nickname }}";
    </script>
    <script
      src="{{ url_for('static', filename='js/admin/chat.js') }}"
      defer
    ></script>
    <script
      type="module"
      src="{{ url_for('static', filename='js/emoji.js') }}"
      defer
    ></script>
  </body>
</html>
